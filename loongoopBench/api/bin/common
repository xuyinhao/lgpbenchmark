#!/bin/sh
function clearDir(){
 if [ "" == "$1" ]; then
  echo "dir is not prefer!"
  exit 0
 fi
 `$test -d "$1" 1>/dev/null 2>&1`
 if [ 0 -ne $? ]; then
  `$mkdir -p "$1" 1>/dev/null 2>&1`
 fi
 `$rm -r "$1/*" 1>/dev/null 2>&1`
}

function clearTmpDir(){
 if [ "" == "$1" ]; then
  echo "dir is not prefer!"
  exit 0
 fi
 test -d "$1"
 if [ 0 -ne $? ]; then
  mkdir -p "$1"
 fi
 rm -rf $1/*
}

function genString(){
  j=0;
  for i in {a..z};do array[$j]=$i;j=$(($j+1));done
  for i in {A..Z};do array[$j]=$i;j=$(($j+1));done
  for ((i =0;i < $1;i++));do strs="$strs${array[$(($RANDOM%$j))]}"; done;
        echo $strs
}

function genDeepPath(){
 deepPath="" 
 for((i=0; i<$1; i++))
  do
  str=$(genString $2)
  deepPath=$deepPath"/"$str
  done
 echo $deepPath
}

function getMountPath(){
 val=`grep -n 'leofs.mountpoint.dir' ${leofsSitePath}`
 val=`expr ${val:0:1} + 1`
 str=`sed -n "${val}p" ${leofsSitePath}`
 str=${str#*<value>}
 str=${str%</value>*}
 echo $str
}

function getLeofsRealPath(){
 userName=`whoami`
 if [[ "$1" == "/"* ]]; then
   echo ${mountPath}"$1"
 else
   echo ${mountPath}/user/$userName/"$1"
 fi
}

function getMd5(){
 md5=`md5sum -t "$1"`
 md5=${md5% *}
 echo "$md5"
}
